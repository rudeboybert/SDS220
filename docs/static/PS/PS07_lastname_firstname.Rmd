
---
title: "Problem Set 07"
author: "WRITE YOUR NAME HERE"
date: "2018-10-31"
output:
  html_document:
    highlight: tango
    theme: cosmo
    toc: yes
    toc_depth: 2
    toc_float:
      collapsed: false
    df_print: kable
---

```{r, include=FALSE}
# Do not edit this code block/chunk
knitr::opts_chunk$set(echo = TRUE, message=FALSE, warning = FALSE, fig.width = 16/2, fig.height = 9/2)
```

# Collaboration {-}

Please indicate who you collaborated with on this problem set: 



# Background {-}

Think back to the hate crimes data we used in Problem Set 02. The FiveThirtyEight article article about those data are in the Jan 23, 2017  ["Higher Rates Of Hate Crimes Are Tied To Income
Inequality"](https://fivethirtyeight.com/features/higher-rates-of-hate-crimes-are-tied-to-income-inequality/)

We will use these data in this Problem Set to run regression models with a single categorical predictor (explanatory) variable. 

## Setup

First load the necessary packages 

```{r}
library(ggplot2)
library(dplyr)
library(moderndive)
library(fivethirtyeight)
```


Next let's explore the `hate_crimes` dataset in the `fivethirtyeight` package using the `glimpse()` function from the `dplyr` package:

```{r}
glimpse(hate_crimes)
```

You should also use the `View()` function to take a look at the data in the viewer Recall we can't have `View()` in an R Markdown document! And finally, type ?hate_crimes into the console to see a description of the variables in this data set. 

## Data manipulation

We will next add a new column to this data set that expresses the Share of 2016 U.S. presidential voters who voted for Trump as a categorical variable. Run this code below. 

```{r}
hate_crimes <- hate_crimes %>% 
  mutate(trump_support = cut_number(share_vote_trump, 3, 
                              labels = c("low", "medium", "high")))
```

The `cut_numbers` function used in the code above sorts the `share_trump_vote` variable from lowest to highest,  cuts it into three groups of roughly 17 states each (51/3). It categorizes all the lowest values as "low", the middle 17 values as "medium", and the top 17 values as "high". We have created a categorical variable! 


# Question 1: Trump support level

Let's model the relationship between:

* $y$: Hate crimes per 100K individuals in the 10 days after the 2016 US election as measured by the SPLC
* $x$: Level of Trump support in the state: `low`, `medium`, or `high`, as contained in the variable `trump_support` we created above.

## a) Visual model

1. Create a visual model of this data (a graph) that will allow you to conduct an "eyeball test" of the relationship between hate crimes per 100K and level of Trump support. Include appropriate axes labels and a title.
1. Comment on the relationship between these two variables.

```{r}

```

## b) Regression model

Now run a model that examines the relationship between hate crime rates and the level of Trump support. Generate a regression table.

```{r}

```

1. What does the intercept mean in this regression table?
1. What does the model estimate as the number of hate crimes per 100000 people in states with  "low" Trump support?
1. Does the model estimate that hate crimes are more frequent in states that show "low" or "medium" support for Trump?
1. What does the model predict as the number of hate crimes per 100000 people in states with  "high" Trump support?
1. What are the three possible fitted values $\widehat{y}$ for this model? (Hint: use the `get_regression_points`) function to explore this if you are not sure!

Write your answers here (if possible in an enumerated list just like above): 


## c) Questions

For these questions, showing your work is optional; solve it any way you choose. 

1. Which 5 states had the highest rate of hate crimes? Describe levels of Trump support in these 5 states.
1. Which 5 states had the lowest rate of hate crimes? Describe levels of Trump support in these 5 states.
1. Do these results surprise you? There is no right answer to this question

Write your answers here (if possible in an enumerated list just like above): 



# Question 2

For this exercise, we will model the relationship between 

* $y$: Hate crimes per 100K individuals in the 10 days after the 2016 US election as measured by the SPLC
* $x$: Level of unemployment in the state: `low`, or `high`. We will create this categorical variable. 

Using the tools and code examples from above, complete the following tasks:

## a) data manipulation

1. Make a new **categorical** variable called `unemployment` that has **two** levels, "low" and "high" based on the variable `share_unemp_seas`. 

```{r}

```

## b) visual data exploration 

Create a visual model of this data (a graph) that will allow you to conduct an "eyeball test" of the relationship between hate crimes per 100K and unemployment level. Include appropriate axes labels and a title.

```{r}

```

## c) running the model

Now run a model that examines the relationship between hate crime rates and the unemployment level. Generate a regression table.

```{r}

```

## d) interpreting the model

Answer the following questions:

1. What does the intercept mean in this regression table?
1. What does the model estimate as the number of hate crimes per 100000 people in states with  "high" unemployment?
1. What are the two possible fitted values $\widehat{y}$ for this model? Why are there only two this time? (there were three in the last question)

Answer the questions here:


## e) interpreting residuals

Use the `get_regression_points` function to generate a table showing the predictions, and the residuals. How are the residuals calculated here? 


```{r}

```

Answer the question here: 


