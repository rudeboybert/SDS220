---
title: "SDS 220: Intro to Probability and Statistics"
author: "Albert Y. Kim & Beth Brown"
date: "Last updated on `r Sys.Date()`"
output:
  html_document:
    toc: true
    toc_depth: 2
    toc_float: true
    includes:
      in_header: "favicon.html"
---

<style>
h1{font-weight: 400;}
</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE, message=FALSE, warning = FALSE, eval = TRUE, 
  fig.width = 16/2, fig.height = 9/2
)


# tidyverse R packages:
library(ggplot2)
library(dplyr)
library(tibble)
library(tidyr)
library(readr)
library(purrr)
library(forcats)
library(stringr)
library(lubridate)
library(forcats)


# CRAN R packages:
library(knitr)
library(fivethirtyeight)
library(nycflights13)
library(gapminder)
library(babynames)
library(scales)
library(moderndive)
library(leaflet)
library(maps)
library(mapproj)
library(patchwork)
library(kableExtra)
library(here)

# Set seed value of random number generator to get "replicable" random numbers.
set.seed(76)

# Example points for boxplots
example <- tibble(
  values = c(1, 3, 5, 6, 7, 8, 9, 12, 13, 14, 15, 30)
)

# fruit basket example for data wrangling
fruit_basket <- tibble(
  type = c("mango", "kiwi", "mango", "grape", "grape", "mango"),
  price = c(2, 3, 1, 3, 1, 3)
)

# simple regression example
simple_regression_ex <- tibble(
  x = c(0, 0.5, 1),
  y = c(2, 1, 3)
)

# Note to future self: Changes y = value to something with context. Also saying
# "the fitted value for value" is awkweird
categ_regression_ex <- tibble(
  name = c("Bert", "Bert", "Bert", "Florence", "Florence", "Florence", "Katie", "Katie", "Katie"),
  value = c(9, 10, 11, 11, 12, 13, 8, 9, 10)
)
```



***



# Schedule 

<iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vQM-5FVt5BKJZsfElEV19NwD2MXGgSVUfGLB7dUoD0MbCU6Dkzqx66UMxbgqMaiS6H8CP8numV5Xaf-/pubhtml?gid=1080602121&amp;single=true&amp;widget=true&amp;headers=false" width="100%" height="1050"></iframe>



<!--
{target="_blank"}
-->


<!--
Notes to future self:

- Every two weeks: a holistic, cummulative, synthesis that ties in more with 
badge challenge than project. On paper, like the "debugging" exercise Lec13
- 
-->



***


<!--
# Lec 27: Wed 4/15

## Announcements

* `NA`

## Chalk Talk

1. Watch this mini-lecture on ["More on confidence intervals"](https://www.showme.com/sh/?h=YgdZ0gy){target="_blank"}
1. Then read sections 8.6 and 8.7 - 8.7.2 in our book. Remember to carefully work the code pieces just as if you were in live class with us. 



***



# Lec 26: Wed 4/8

## Announcements

1. Lecture on Monday 4/13 is cancelled
1. In case you missed it, please read the revised [Project](project.html#revised-project-goals). We have significally scaled back the amount of work necessary to complete the project for the semester. You now only to submit and revise/resubmit a reflection piece.
1. We have posted two informational videos in the [Badge Challenges](badge_challenges.html#videos) tab of the webpage:
    1. "How to Take Badge Challenge 2"
    1. "How to Study for Badge Challenge 2"


## Chalk Talk

1. Watch this mini-lecture on ["Interpreting confidence intervals"](https://www.showme.com/sh/?h=Ci9mrVQ){target="_blank"}
1. Then read section 8.5 in our book. Remember to carefully work the code pieces just as if you were in live class with us. 




## Discussion Sessions

1. There are 4 Zoom discussion sessions between Wed 4/8 and Thurs 4/9. They are listed on [this Google Calendar](https://calendar.google.com/calendar/embed?src=smith.edu_qd5sufjufbms2430ielqeego24%40group.calendar.google.com&ctz=America%2FToronto){target="_blank"}. Please add this calendar to your own calendar!
1. Be sure to set the "time zone" in your own Google Calendar to match your location so that the appointment times appear correctly for you. For reference, Will Hopper's Wed 4/8 session is between 9:00am - 10:30am Eastern.


## Getting More Help

1. Ask questions in the `#questions` channel on Slack!
1. To schedule a one-on-one appointment with a Spinelli Tutor, visit their [self-scheduled appointment calendar](https://calendar.google.com/calendar/selfsched?sstoken=UUU0UTRmUnpvVmhIfGRlZmF1bHR8OTk2MWU3M2M2NmI1NjhiODdjMzhiZjVhM2Q1Yjg5NDc){target="_blank"}. Be sure to set the "time zone" in your own Google Calendar to match your location so that the appointment times appear correctly for you. 



***


# Lec 25: Mon 4/6

## Announcements

1. Please read the updated [implementation notes for the Badge Challenges](https://smithcollege-sds.github.io/SDS220/badge_challenges.html#challenge-format){target="_blank"} and ask questions on the #remote_learning Slack channel
1. Spinelli center tutoring is up and running! See the "Getting More Help" section below for more information.


## Chalk Talk

1. Watch this mini-lecture tying [bootstrap distributions to the computations of Confidence Intervals ](https://www.showme.com/sh/?h=Vg828zg){target="_blank"}
1. Then read sections 8.3 and 8.4 in our book. Remember to carefully work the code pieces just as if you were in live class with us. 
1. A question to ponder (as you watch the video and read the sections) is "How does the bootstrap distribution approximation of the sampLING distribution strengthen what your one sample can do?"

## Discussion Sessions

1. There are 4 Zoom discussion sessions between Mon 4/6 and Tues 4/7. They are listed on [this Google Calendar](https://calendar.google.com/calendar/embed?src=smith.edu_qd5sufjufbms2430ielqeego24%40group.calendar.google.com&ctz=America%2FToronto){target="_blank"}. Please add this calendar to your own calendar!
1. Be sure to set the "time zone" in your own Google Calendar to match your location so that the appointment times appear correctly for you. For reference, Will Hopper's Fri 4/3 session is between 9:00am - 10:30am Eastern.


## Getting More Help

1. To schedule a one-on-one appointment with a Spinelli Tutor, visit their [self-scheduled appointment calendar](https://calendar.google.com/calendar/selfsched?sstoken=UUU0UTRmUnpvVmhIfGRlZmF1bHR8OTk2MWU3M2M2NmI1NjhiODdjMzhiZjVhM2Q1Yjg5NDc){target="_blank"}.
1. Be sure to set the "time zone" in your own Google Calendar to match your location so that the appointment times appear correctly for you. For reference, Chichi's first Mon 4/6 appointment block is between 9:30am â€“ 10:15am eastern.



***



# Lec 24: Fri 4/3

## Announcements

1. We have read all your survey responses. If anything changes about your living situation or learning environment, please be proactive and let us know ASAP!
1. Spinelli center tutoring is up and running! See the "Getting More Help" section below for more information.



## Chalk Talk

1. In preparation, have the following figures and tables ready in separate tabs in your browser:
    1. ModernDive Figure 7.15 comparing three sampl-ING distributions of $\widehat{p}$ based on samples of size $n$ = 25, 50, and 100.
    1. ModernDive Table 7.5 on difference scenarios for sampling for (statistical) inference
1. Watch this mini-lecture on [Boostrap Distributions](https://www.showme.com/sh/?h=HxoE3cm){target="_blank"}. Note at 17m54s it is a little longer than you can expect this semester as I both recapped Ch7 on Sampling and was getting used to the tech.  
1. Read from the beginning of Chapter 8 up to and including 8.2 in our book. Click the "ModernDive" tab above to ensure you're reading the right version of the book.


## Discussion Sessions

1. There are 4 Zoom discussion sessions between Fri 4/3 and Sun 4/5. They are listed on [this Google Calendar](https://calendar.google.com/calendar/embed?src=smith.edu_qd5sufjufbms2430ielqeego24%40group.calendar.google.com&ctz=America%2FToronto){target="_blank"}. Please add this calendar to your own calendar!
1. Be sure to set the "time zone" in your own Google Calendar to match your location so that the appointment times appear correctly for you. For reference, Will Hopper's Fri 4/3 session is between 9:00am - 10:30am Eastern.


## Getting More Help

1. To schedule a one-on-one appointment with a Spinelli Tutor, visit their [self-scheduled appointment calendar](https://calendar.google.com/calendar/selfsched?sstoken=UUU0UTRmUnpvVmhIfGRlZmF1bHR8OTk2MWU3M2M2NmI1NjhiODdjMzhiZjVhM2Q1Yjg5NDc){target="_blank"}.
1. Be sure to set the "time zone" in your own Google Calendar to match your location so that the appointment times appear correctly for you. For reference, Chichi's first Fri 4/3 appointment block is between 9:30am â€“ 10:15am eastern.



***



# Lec 23: Wed 4/1

## Announcements

1. Please read the announcements from Mon 3/30

## Chalk Talk

1. Watch this [mini-lecture](https://www.showme.com/sh?h=ZtNEJea){target="_blank"} connecting Monday's class to today's topic. 
2. Then read sections 7.5 and 7.6 in our book.
3. Today's big idea is the Central Limit Theorem!!!

## Discussion Sessions

There are 4 discussion sessions between 4/1 and 4/2. They are listed on [this Google Calendar](https://calendar.google.com/calendar/embed?src=smith.edu_qd5sufjufbms2430ielqeego24%40group.calendar.google.com&ctz=America%2FToronto){target="_blank"}. Please add this calendar to your own calendar! 



***



# Lec 22: Mon 3/30

## Announcements

* Add the sds-mth-220-2020-01.slack.com workspace to your Desktop or Mobile version of Slack.
* Please _carefully_ read the following updated tabs of the course webpage: "COVID-19" (if you haven't already read our update from Friday 3/27), "Badge Challenges", "Project", and "Syllabus". If anything isn't clear, please ask us in the `#questions` channel in Slack.
* Please ensure you are doing the readings from the <https://moderndive-bert.netlify.com/> version of the book i.e. there should be a "-bert" in the link. For example, clicking the "ModernDive" tab of this webpage will take you to the correct version of the book.


## Chalk Talks

1. Watch this [mini-lecture](https://www.showme.com/sh?h=nt6tx4K){target="_blank"} connecting Monday's class from before spring break to now. Then read sections 7.3 and 7.4 in our book.
2. Watch this [bonus mini-lecture](https://www.showme.com/sh?h=qfDITQW){target="_blank"} on SampLING distributions. 

## Discussion Sessions

There are 4 discussion sessions between 3/30 and 3/31. They are listed on [this Google Calendar](https://calendar.google.com/calendar/embed?src=smith.edu_qd5sufjufbms2430ielqeego24%40group.calendar.google.com&ctz=America%2FToronto){target="_blank"}. Please add this calendar to your own calendar! 



***



# Lec 21: Fri 3/13

## Announcements

1. Practice-run of Zoom lecture format
1. Went over COVID-19 preparations



***



# Lec 20: Wed 3/11

## Announcements

1. Acknowledgement of situation
1. Issue of communication
1. Slack:
    1. No more browser-based version, install Desktop App or Mobile App
    1. Add `#remote_learning` channel: Post questions/comments specifically about remote learning technology here.
    1. Setting notifications
1. COVID-19 tab of webpage:
    1. "Remote Learning Preparedness Survey"
    1. Go over components of course
1. Zoom
    1. Login to meeting as practice run for lectures
    1. Practice creating meetings in groups
    1. Practice screensharing
1. Questions (to be posted on COVID-19 tab of webpage)



***



# Lec 19: Mon 3/9

## Announcements

1. Project proposal due today at 11pm. Spinelli tutors (who have all taken SDS 192 Introduction to Data Science) are available tonight 7-9pm in Sabin-Reed 301.


## Recap

1. Last time, we did "tactile" simulations with our hands using a shovel with $n$ = 50 slots to extract samples from the bowl.
1. For each sample, you [generated estimates](https://docs.google.com/spreadsheets/d/14iWUKc-lBY8U_hs4Fng50oT43yGQZsgZjrVh7ZtF9VI/edit#gid=0){target="_blank"} of the proportion of the bowl's balls that are red.
1. Note: In ModernDive 7.1, 33 groups of Amherst College students took samples from a bowl with slightly different contents.


## Chalk Talk

1. Chalk talk part I:
    1. Mimic the "tactile sampling using a tactile shovel" from Lec18 on Friday with "virtual sampling using virtual shovel": the `rep_sample_n()` function, which uses your computer's [random number generator](https://en.wikipedia.org/wiki/Random_number_generation){target="_blank"}.
    1. Example: `rep_sample_n(size = 50, rep = 33)`
1. Reading part I
    1. 7.2 up to the end of 7.2.2
1. Chalk talk part II:
    1. Break down the data wrangling needed to create the data frame visualized in Figure 7.10: Histogram of 1000 proportion reds
1. Readings part II
    1. 7.3 & 7.4. In particular, compare Figure 7.12 and Table 7.1
    


***



# Lec 18: Fri 3/6

## Announcements

1. FYI: You will not be penalized for missing class due to illness.
1. Project proposal due on Monday 11pm. Spinelli tutors (who have all taken SDS 192 Introduction to Data Science) are available on Sunday and Monday 7-9pm in Sabin-Reed 301.

## Recap

1. `NA`

## Chalk Talk

1. In-class activity



***



# Lec 18: Fri 3/4

## Announcements

1. Show moderndive book cover to emphasize importance of sampling


## Today's Topics/Activities

### 1. Chalk talk

1. 

### 2. In-class exercise

1. 


Private: detailed notes for this "random assignment for causal inference" lecture can be found

1. On [Google Docs](https://docs.google.com/document/d/1o761ogcEw7_T82Q84X3kHZFy1dzYxmmS34xG8rrcjpM/edit)
1. In this [PDF](static/2020-03-04_Lec18_Notes_ Random_Assignment_for Causal_Inference.pdf)




***

-->



# Lec 17: Wed 3/2

## Announcements

1. Added cheat sheet policy to [Midterm I](midterms.html#midtermI)
1. Message in Slack `#general`: What are Shiny Apps?
1. Discuss [project EDA](project.html#EDA) phase of final project: Download `final_project.Rmd` from Moodle. 


## Today's Topics/Activities

### 1. Chalk talk

1. Revisit Africa data in terms of learning goals for Midterm I: Put code in `classnotes.Rmd`
    ```{r, eval=FALSE}
    library(readr)
    library(dplyr)
    library(ggplot2)
    library(moderndive)
    africa <- read_csv("https://rudeboybert.github.io/SDS220/static/africa_results_2022.csv")
    
    # 1. Regression with one numerical x
    # 1.a) EDA
    ggplot(data = africa, mapping = aes(x = height, y = countries_in_africa)) +
      geom_point() +
      geom_smooth(method = "lm", se = FALSE) +
      labs(x = "Height", y = "Number of countries guessed", title = "Africa survey")
    
    # 1.b) Fit model and get regression table
    africa_model_num_x <- lm(countries_in_africa ~ height, data = africa)
    get_regression_table(africa_model_num_x)
    
    # 2. Regression with one categorical x
    # 2.a) EDA
    ggplot(data = africa, mapping = aes(x = group, y = countries_in_africa)) +
      geom_boxplot() +
      labs(x = "Group", y = "Number of countries guessed", title = "Africa survey")
    
    # 2.b) Fit model and get regression table
    africa_model_cat_x <- lm(countries_in_africa ~ group, data = africa)
    get_regression_table(africa_model_cat_x)
    ```
1. Model selection using visualizations. In particular, choosing between the interaction and parallel slopes models by comparing
    1. Figure 6.7 for UT Austin data
    1. Figure 6.8 for Massachusetts high school data
1. Model selection using $R^2$. In particular, choosing between the interaction and parallel slopes models by comparing $R^2$ values






### 2. In-class exercise

1. Go over ModernDive reading in schedule above, which you need to complete before next lecture.
1. You do not need to submit the answers of all Learning Checks; they are meant for your practice. The solutions to all Learning Checks can be found in Appendix D of ModernDive.


***


# Lec 16: Mon 2/28

## Announcements

1. Self-schedule Seelye Midterm I this weekend. See [Midterms](midterms.html) tab
1. Next phase of project "Project EDA" assigned on Wednesday


## Today's Topics/Activities

### 1. Chalk talk

1. Recap of Lec 15: Interaction models are one type of multiple regression model for $x_1$ numerical and $x_2$ categorical (with $k$ levels/groups).
1. Parallel slopes models are another type of model.


### 2. In-class exercise

1. Go over ModernDive reading in schedule above, which you need to complete before next lecture.
1. You do not need to submit the answers of all Learning Checks; they are meant for your practice. The solutions to all Learning Checks can be found in Appendix D of ModernDive.


***


# Lec 15: Fri 2/25

Cancelled: Snow day


***


# Lec 14: Wed 2/23

## Announcements

1. 

## Today's Topics/Activities

### 1. Chalk talk

1. Multiple regression for $y$ as a function of two explanatory/predictor variables:
    1. $x_1$ numerical
    1. $x_2$ categorical
1. First type of multiple regression model: interaction model. What is an interaction effect?
1. Using teaching `evals` data from Chapter 5 again:
    1. Figure 6.1: EDA Visualization of interaction model
    1. Table 6.2: Regression table of coefficients for interaction model
    1. Equation for fitted values $\hat{y}$
    1. Table 6.4: Intercepts and slopes of regression line for both genders (recorded as binary at time of study in 2005)
    1. Interpretation of results

### 2. In-class exercise

1. Go over ModernDive reading in schedule above, which you need to complete before next lecture.
1. You do not need to submit the answers of all Learning Checks; they are meant for your practice. The solutions to all Learning Checks can be found in Appendix D of ModernDive.


***


# Lec 13: Mon 2/21

## Announcements

1. [Project proposal](project.html) due during lab on Thursday


## Today's Topics/Activities

### 1. Chalk talk

More on regression using a categorical explanatory/predictor variable $x$. Reusing `categ_regression_ex` code example from Lec12:

1. Write out equation for fitted value $\hat{y}$ using indicator functions
1. Computing all fitted values and residuals by hand
1. Re-using code example from Lec12, apply `get_regression_points()` function (additional code is posted below in Lec12)


### 2. In-class exercise

1. Go over ModernDive reading in schedule above, which you need to complete before next lecture.
1. You do not need to submit the answers of all Learning Checks; they are meant for your practice. The solutions to all Learning Checks can be found in Appendix D of ModernDive.


<!--

Recall the `categ_regression_ex` data frame from from Lec11. Note that the explanatory variable $x$ = name is now categorical with 3 levels: Bert, Florence, Katie.

```{r, echo=FALSE, eval=TRUE}
categ_regression_ex
```

You then plotted the points. Let's also add three lines:

1. A solid line for Bert's "baseline" mean ("Bert" is the baseline because it comes first alphanumerically)
1. A dashed line for Flo's mean, which is *offset* from Bert's mean by 12 - 10 = +2
1. A dotted line for Ivy's mean, which is *offset* from Bert's mean by 9 - 10 = -1

```{r, eval=TRUE, echo=FALSE}
ggplot(data = categ_regression_ex, mapping = aes(x=name,y=value)) +
  geom_point() +
  geom_hline(yintercept = 10) +
  geom_hline(yintercept = 12, linetype = "longdash") +
  geom_hline(yintercept = 9, linetype = "dotted")
```

Then write on board (in order to bridge the gap between output of regression
table & wacked out indicator function notation they'll read in Chapter 5.2.2
today):

1. Make a separate table of name on rows, and nameFlorence and nameKatie in columns, populate with 0's & 1's
1. Write out equation of "line" in terms of regression table output:
    + `value = intercept + nameFlorence + nameKatie`.
    + Do all three cases
1. Write out equation of line via math and with indicator functions:
    + Explain what indicator function is $1_{Florence}(x)$
    + $\widehat{y} = b_0 + b_{Florence}\cdot 1_{Florence}(x) + b_{Katie}\cdot 1_{Katie}(x)$
    + We need this notation in particular for multiple regression in Chapter 6


Let's now get the fitted values and residuals using the `get_regression_points()` function on `model_ex` (where our model is saved):

```{r, eval = FALSE, echo = FALSE}
# Step 2: Get regression points
get_regression_points(model_ex)
```

Then write on board:

1. When x is categorical y-hat fitted values correspond to group means for each level:
    + Bert: Just 10
    + Florence: 10 + 2 = 12
    + Katie: 10 - 1 = 9
1. Compute a few residuals and show they correspond to deviations/errors from the group means

Note for future self: Make sure to talk about interpretation of the values in estimate column of table in context of example.

Note for future self:
- x numerical: for every slide of 1 in x, the slope is the expected/on average change in y (not necessarialy causal)
- x categorical: for a hop between categories starting from the baseline

If mental bandwidth exists, add to ModernDive -> Chapter 5.2.2 -> a visualization of what the terms in the regression table in Table 5.8 actually mean. Do this in [moderndive_book](https://github.com/moderndive/ModernDive_book/) repo -> `bert-dev` branch -> Open `05-regression.Rmd` and edit, commit, and push this file only. The book builds and deploys automatically using Netlify

* A jitterplot of x = continent, y = lifeExp, mark baseline, mark means, show offsets of marked means vs baseline.
* Insert in text right before "Letâ€™s generalize this idea a bit".

-->


***


# Lec 12: Fri 2/18

## Announcements

1. See Slack `#general`: Newest SDS faculty Shiya Cao visit today


## Today's Topics/Activities

### 1. Chalk talk

1. Lec 11 in-class exercise: sum of squared residuals computation of dashed black line
1. Regression with a categorical predictor variable. Copy the following code into your `classnotes.Rmd` that creates a data frame called `categ_regression_ex`
with 9 rows and 2 variables:
    1. A numerical outcome variable $y$ = `value`
    1. An *categorical* explanatory variable $x$ = `name` with 3 levels: Bert, Flo, Ivy.

```{r, eval=TRUE}
library(ggplot2)
library(dplyr)
library(moderndive)
categ_regression_ex <- tibble(
  name = c("Bert", "Bert", "Bert", "Flo", "Flo", "Flo", "Ivy", "Ivy", "Ivy"),
  value = c(9, 10, 11, 11, 12, 13, 8, 9, 10)
)
categ_regression_ex

# Code we typed during Lec12 to view regression table:
# Step 1: Fit and save model
categ_model <- lm(value ~ name, data = categ_regression_ex)
# Step 2: Output regression table
get_regression_table(categ_model)

# Code we typed during Lec13 to view information on all 9 points
# where:
# value = y outcome variable
# name = x explanatory variable (categorical)
# value_yat = y_hat fitted values (group/category means)
# residual = y - y_hat errors
get_regression_points(categ_model)
```


### 2. In-class exercise

1. Go over ModernDive reading in schedule above, which you need to complete before next lecture.
1. You do not need to submit the answers of all Learning Checks; they are meant for your practice. The solutions to all Learning Checks can be found in Appendix D of ModernDive.


***


# Lec 11: Wed 2/16

## Announcements

1. If you need a project group fill out the Google Form found on the [Project](project.html) page by 5pm today.


## Today's Topics/Activities

### 1. Chalk talk

1. PS02 Q11: Skew
1. Correlation is not necessarily causation:
    a) [Spurious correlations](http://www.tylervigen.com/spurious-correlations){target="_blank"}
    a) What are X = treatment, Y = response, and Z = confounding variables?
    a) What are causal graphs? 
1. Recall `simple_regression_ex`
```{r, echo=FALSE, eval=TRUE}
simple_regression_ex
```
    a) Draw the 3 points and the "best-fitting" regression line in blue.
    a) Draw the 3 *fitted values* $\widehat{y}$ using the equation for the regression line $\widehat{y} = b_0 + b_1\cdot x$
    a) Draw the 3 *residuals* $y - \widehat{y}$
    a) Compute the sum of squared residuals for this line.

```{r, echo=FALSE, eval=TRUE}
ggplot(simple_regression_ex, aes(x = x, y = y)) +
  geom_smooth(method = "lm", se = FALSE, size = 0.5) +
  geom_abline(intercept = 2, slope = -1, col = "darkgreen", linetype = "dashed", size = 0.5) +
  geom_point(size = 2)
```

### 2. In-class exercise

1. Repeat sum of squared errors calculation for dashed black line, show the value is "worse" i.e. bigger than the value for the blue regression line. 
1. Go over ModernDive reading in schedule above, which you need to complete before next lecture.
1. You do not need to submit the answers of all Learning Checks; they are meant for your practice. The solutions to all Learning Checks can be found in Appendix D of ModernDive.


***


# Lec 10: Mon 2/14

## Announcements

1. Slack announcement about SDSCC
1. Revisit learning goals
1. [Project proposal](project.html) posted
1. Answer previous question



## Today's Topics/Activities

### 1. Chalk talk

Consider the following 3 points saved in a data frame called `simple_regression_ex`. 
```{r, echo=FALSE, eval=TRUE}
simple_regression_ex
```

We display the *regression table*. This is done in two steps:
```{r, eval = TRUE}
# Step 1: Fit regression model
model_ex <- lm(y ~ x, data = simple_regression_ex)

# Step 2: Get regression table
get_regression_table(model_ex)
```

<!--
* Connection between regression line and values in `estimate` column of regression table.
* Interpretation of:
    + Fitted intercept $b_0$: mathematical versus practical interpretations.
    + Fitted slope $b_1$: precise language matters!
* Obtaining a regression table takes two steps:
    + Create/fit the model using `lm()` and formula interface `y ~ x`
    + Ask for the table using `get_regression_table()` function from `moderndive` package

Notes on precise interpretation of fitted slope b1: For every increase of one
unit in x, it is the associated average increase in y.

* average b/c not all differences of one unit in x have exactly b1 increase in y,
rather averaged across all differences of unit in x
* associated b/c we don't want to assume a casual relationship
-->

### 2. In-class exercise

1. Go over ModernDive reading in schedule above, which you need to complete before next lecture.
1. You do not need to submit the answers of all Learning Checks; they are meant for your practice. The solutions to all Learning Checks can be found in Appendix D of ModernDive.


***


# Lec 09: Fri 2/11

## Announcements

1. First phase of project released on Monday: Project proposal due Thu 2/24
    + Choose groups of 2-3 students, ideally in same lab section
    + Choose from a basket of datasets
1. Keyboard shortcut for `%>%`:
    + macOS: Command + Shift + M
    + Windows: Control + Shift + M


## Today's Topics/Activities

### 1. Chalk talk

1. For ModernDive Ch5 you need to install some new packages, including the [`tidyverse`](https://www.tidyverse.org/packages/){target="_blank"} package
1. Normal distribution
1. Correlation coefficient:
    + Definition
    + Examples
    + Play "guess the correlation" game
1. Regression line:
    + Outcome/response $y$ and explanatory/predictor variables $x$
    + Teaching evaluations


### 2. In-class exercise

1. Go over ModernDive reading in schedule above, which you need to complete before next lecture.
1. You do not need to submit the answers of all Learning Checks; they are meant for your practice. The solutions to all Learning Checks can be found in Appendix D of ModernDive.


<!--
## Recap

![](static/images/toolbox.jpeg){ width=50% }

Our data wrangling toolbox, which you will use for your project and for the rest of this course:

1. `filter()` rows
1. `summarize()` rows using a summary function
1. `group_by()` to group rows by the values of another variable
1. `mutate()` new variables/columns
1. `arrange()` rows in ascending (default) or `desc()`ending order
1. `select()` variables/columns
1. For more verbs, see `dplyr` cheatsheet: Go to RStudio menu bar -> Help -> Cheatsheets -> Data Transformation with `dplyr`.


Students get tripped up with difference between filter() and summarize(). The
former does not modify original rows, whereas the latter creates new ones that
are based on summary statistics.


Next time 220 is taught: At this point in semester (Lec08-09) since students have a little context, consider doing a review of coding/computing concepts needed for this course:

- R console vs R Markdown are two different environments. i.e. when you create a variable/load a package in one, it doesn't necessarily exist in the other.
- Tackling error messages. Perhaps have a problem set where the students read error message and write down what the message is saying.
- Paired programming exercise: One student only writes, the other only asks questions.
- When getting help, steer students away from saying "This doesn't work" but rather "I did X. I got result Y. I think Z." That way we get what they're thinking better: building up to the idea of a minimally reproducible example. 
-->


***


# Lec 08: Wed 2/9

## Announcements

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I wish biology undergrad curricula had more statistics. Every bio major should have 2 semesters of bioinformatics with applied statistics. Learning basic R before graduating would be stupidly powerful.</p>&mdash; Sebastian S. CociobaðŸŒ·ðŸ›  (@ATinyGreenCell) <a href="https://twitter.com/ATinyGreenCell/status/1490509237390352389?ref_src=twsrc%5Etfw">February 7, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


## Today's Topics/Activities

### 1. Chalk talk

Using same `fruit_basket` example from chalk talk in Lec 07:  

```{r, echo=FALSE, eval=TRUE}
fruit_basket
```

1. "Summary functions" are many-to-one functions to compute "summary statistics," like `mean()` & `median()`
1. Using summary functions to then `summarize()` rows
1. Setting "group meta-data" of a data frame using `group_by()`, then `summarize()` rows. In other words, `group_by()` by itself does not change the "data", rather only the "meta-data"
1. `mutate()` new variables from existing variables: price in cents

<!--
**Posted after lecture**: In case you want to run the chalk talk example on your
computer:

```{r, eval = FALSE}
# Create fruit_basket data frame from scratch
# (we won't do this much in this class)
library(tibble)
fruit_basket <- tibble(
  type = c("mango", "kiwi", "mango", "grape", "grape", "mango"),
  price = c(2, 3, 1, 3, 1, 3)
)

# Calculate average cost of all fruit:
library(dplyr)
avg_price_all_fruit <- fruit_basket %>% 
  summarize(mean_price = mean(price))
avg_price_all_fruit

# Calculate average cost of each fruit:
avg_price_each_fruit <- fruit_basket %>% 
  group_by(type) %>% 
  summarize(mean_price = mean(price))
avg_price_each_fruit

# Calculate cost of each fruit in cents:
fruit_basket_cents <- fruit_basket %>% 
  mutate(price_cents = price * 100)
fruit_basket_cents
```
--> 

### 2. In-class exercise

1. Go over ModernDive reading in schedule above, which you need to complete before next lecture.
1. You do not need to submit the answers of all Learning Checks; they are meant for your practice. The solutions to all Learning Checks can be found in Appendix D of ModernDive.


***


# Lec 07: Mon 2/7

## Announcements

* Copy the following code in a new R code chunk in your `classnotes.Rmd` file
    ```{r, eval=FALSE}
    library(readr)
    library(dplyr)
    library(ggplot2)
    africa <- read_csv("https://rudeboybert.github.io/SDS220/static/africa_results_2022.csv")
    
    # Look at variable types
    glimpse(africa)
    
    # 1. Scatterplot
    ggplot(data = africa, mapping = aes(x = height, y = countries_in_africa)) +
      geom_point()
    
    # 2. Histogram
    ggplot(data = africa, mapping = aes(x = height)) +
      geom_histogram()
    
    # 3. Boxplot
    ggplot(data = africa, mapping = aes(x = group, y = countries_in_africa)) +
      geom_boxplot()
    ```


## Today's Topics/Activities

### 1. Chalk talk

1. Finish data visualization
    + Recap 3 data visualizations 
    + Note about boxplots: width/height of the box = IQR = measure of spread
    + How to add labels to a `ggplot()` with `labs()`
1. Data wrangling
    1. Define the "pipe operator" `%>%`, pronounced *then*
    1. Logical AKA boolean operators in computer programming
    1. `filter()` rows that match a criteria
    1. Example data frame we'll use is `fruit_basket`

```{r, echo=FALSE, eval=TRUE}
fruit_basket
```

**Posted after lecture**: In case you want to run the chalk talk example on your
computer:

```{r, eval = FALSE}
# Create fruit_basket data frame from scratch
# (we won't do this much in this class)
library(tibble)
fruit_basket <- tibble(
  type = c("mango", "kiwi", "mango", "grape", "grape", "mango"),
  price = c(2, 3, 1, 3, 1, 3)
)

# Filter the basket only for grapes
library(dplyr)
grape_basket <- fruit_basket %>% 
  filter(type == "grape")

# View contents of grapes
grape_basket
```

<!--
First, let's compare the boxplot you created in Lec04 with the original points. See how they align.

```{r, echo=FALSE, eval=TRUE}
plot1 <- ggplot(example, aes(x=factor(1), y=values)) +
  geom_point() +
  labs(title = "Points") +
  theme(
    axis.title.x = element_blank(),
    axis.text.x = element_blank(),
    axis.ticks.x = element_blank()
  )

plot2 <- ggplot(example, aes(x=factor(1), y=values)) +
  geom_boxplot() +
  labs(title = "Boxplot") +
  theme(
    axis.title.x = element_blank(),
    axis.text.x = element_blank(),
    axis.ticks.x = element_blank()
  )
plot1 + plot2
```

Second, let's compare two visualizations of the distribution of the numerical variable temperature *split by* month:

* Faceted histogram in ModernDive [Figure 2.13](https://moderndive-bert.netlify.com/2-viz.html#facets){target="_blank"}
* Side-by-side boxplot in ModernDive [Figure 2.18](https://moderndive-bert.netlify.com/2-viz.html#boxplots){target="_blank"}

```{r, echo=FALSE, eval=TRUE}
ggplot(data = weather, mapping = aes(x = temp)) +
  geom_histogram(binwidth = 5, color = "white") +
  facet_wrap(~ month)
ggplot(data = weather, mapping = aes(x = factor(month), y = temp)) +
  geom_boxplot()
```

Which do you prefer?

--> 


### 2. In-class exercise

1. Go over ModernDive reading in schedule above, which you need to complete before next lecture.
1. You do not need to submit the answers of all Learning Checks; they are meant for your practice. The solutions to all Learning Checks can be found in Appendix D of ModernDive.



***


# Lec 06: Fri 2/4

Cancelled: Snow day


***


# Lec 05: Wed 2/2

## Announcements

1. At the beginning of every lecture you should have the following open:
    1. This webpage
    1. ModernDive
    1. Slack team for this course
    1. RStudio 
1. Install the `readr` package
1. Spinelli Center drop-in tutoring information posted in syllabus
1. Recap of `classnotes.Rmd`: where you can save all code from all in-class exercises
1. Recap in-class activity based on student ID numbers from last lecture

```{r, echo=FALSE, eval=FALSE}
# Create spreadsheet of class results
library(readr)
library(dplyr)
library(googlesheets4)
library(janitor)
library(lubridate)
library(ggplot2)

# bit.ly/africa_quiz
primed_with_94 <-
  "https://docs.google.com/spreadsheets/d/12It45XNGLy2sTu9gTzBkaESZoiOgDxCJDnt5PvcDqpI/edit?resourcekey#gid=1670564414" %>% 
  read_sheet() %>% 
  clean_names() %>% 
  filter(timestamp >= ymd("2022-01-30")) %>% 
  mutate(group = "Primed with 94")

# bit.ly/africa_experiment
primed_with_14 <-
  "https://docs.google.com/spreadsheets/d/1UY0C_kXnnfeE_EGKcsO33-UCpPf6pxTFU19FA7XiirY/edit?resourcekey&usp=forms_web_b#gid=350445613" %>% 
  read_sheet() %>% 
  clean_names() %>% 
  filter(timestamp >= ymd("2022-01-30")) %>% 
  mutate(group = "Primed with 14")

africa <- bind_rows(
  primed_with_94, primed_with_14
) %>% 
  select(
    year, height = what_is_your_height, been_to_africa = have_you_been_to_africa_before, 
    countries_in_africa = how_many_countries_are_there_in_africa_enter_only_a_single_number_and_no_text,
    id_number = is_the_last_digit_of_your_id_number_even_or_odd, group
  ) %>% 
  mutate(
    year = as.character(year),
    height = as.numeric(height),
    been_to_africa = ifelse(been_to_africa == "Yes", TRUE, FALSE)
  ) %>% 
  # remove outlier
  filter(!(id_number == "Even" & group == "Primed with 94"))

africa %>% 
  write_csv("static/africa_results_2022.csv")
```

```{r, echo=FALSE, eval=FALSE}
library(googlesheets4)
africa <- read_sheet("https://docs.google.com/spreadsheets/d/1qJsvYHFQq90fTZBP7M-xOGEsytmmrnKCm__v_uwL7Ks/edit#gid=145126610")

library(readr)
library(ggplot2)
africa <- read_csv("https://rudeboybert.github.io/SDS220/static/africa_results_2022.csv")
View(africa)

ggplot(africa, aes(x = group, y = countries_in_africa)) +
  geom_boxplot() +
  labs(
    x = "Priming group", 
    y = "Number of countries",
    title = "Number of countries in Africa guessed"
  )

ggplot(africa, aes(x = group, y = countries_in_africa)) +
  geom_boxplot() +
  labs(
    x = "Priming group", 
    y = "Number of countries",
    title = "Number of countries in Africa guessed"
  ) +
  facet_wrap(~been_to_africa) +
  geom_hline(yintercept = 54, col = "red")

ggplot(africa, aes(x = height, y = countries_in_africa)) +
  geom_point() +
  labs(
    x = "Height in inches", 
    y = "Number of countries",
    title = "Number of countries in Africa guessed"
  )

ggplot(africa, aes(x = height)) +
  geom_histogram(binwidth = 2.5)
```

## Today's Topics/Activities

### 1. Chalk talk

```{r, eval=TRUE, echo=FALSE}
library(ggplot2)
library(dplyr)
example <- tibble(
  values = c(1, 3, 5, 6, 7, 8, 9, 12, 13, 14, 15, 30)
)
```

We want to visualize the distribution of the following `r nrow(example)` values with a boxplot: `r example %>% pull(values)`. They have the following *summary statistics* (a single numerical value *summarizing* many values):

1. Quartiles (1st, 2nd, and 3rd) that cut up the data into 4 parts, each containing roughly one quarter = 25% of the data:
    a) 1st quartile: `r quantile(example$values, probs=0.25, type = 2)`
    a) 2nd quartile = median: `r median(example$values)`
    a) 3rd quartiles: `r quantile(example$values, probs=0.75, type=2)`
1. Interquartile-range (IQR): the distance between the 3rd and 1st quartiles:
    a) 8 = 13.5 - 5.5


### 2. In-class exercise

1. Go over ModernDive reading in schedule above, which you need to complete before next lecture.
1. You do not need to submit the answers of all Learning Checks; they are meant for your practice. The solutions to all Learning Checks can be found in Appendix D of ModernDive
1. At 11:55am: Continue Africa activity


***


# Lec 04: Mon 1/31

## Announcements

1. At the beginning of every lecture you should have the following open:
    1. This webpage
    1. ModernDive
    1. Slack team for this course
    1. RStudio 
    
## Today's Topics/Activities

### 1. Chalk talk

1. Mega-mega fun times in-class activity
1. Draw histogram by hand, emphasizing that bins correspond to intervals (right-edge inclusive).
1. Adjust the binning structure of the previous hand-drawn histogram two ways:
    + Adjusting the binwidth
    + Adjusting the number of bins
1. Facets split one graphic by the values of another variable (that does not have too many unique values).


### 2. In-class exercise

1. Go over ModernDive reading in schedule above, which you need to complete before next lecture.
1. You do not need to submit the answers of all Learning Checks; they are meant for your practice. The solutions to all Learning Checks can be found in Appendix D of ModernDive


***


# Lec 03: Fri 1/28

## Announcements

1. Show example of thread in `#questions` on Slack.
1. The Smith College CS Department Liaisons' [Software Install Fair](static/events/software_install_fair.pdf){target="_blank"} is today 2pm-4:30pm, especially if you want help installing RStudio Desktop
1. Lecture recording:
    + [Part 1](https://smith.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=8a01490e-7369-4a3b-b841-ae2b011f33c0){target="_blank"}
    + [Part 2](https://smith.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=4ad4a3c9-6ada-42a9-8813-ae2b011f002c){target="_blank"}
1. [Lecture notes](static/2022-01-28-Lec03.pdf){target="_blank"}    
    
## Today's Topics/Activities

### 1. Chalk talk

1. Draw scatterplot by hand
1. Define the Grammar of Graphics
1. Write example `ggplot()` code
1. Setting up a `classnotes.Rmd` R Markdown file for the in-class exercises. This follows exactly what you did for Lab01 on Thu 1/27.


### 2. In-class exercise

1. Go over ModernDive reading in schedule above, which you need to complete before next lecture.
1. Today's reading is "2 - 2.3.1", which means the start of Chapter 2 up to and including 2.3.1. In other words you don't need to read 2.3.2.
1. You do not need to submit the answers of all Learning Checks; they are meant for your practice. The solutions to all Learning Checks can be found in Appendix D of ModernDive


***


# Lec 02: Wed 1/26

## Announcements

1. Waitlist: Fill out Google Form on Moodle by 1pm. I will start admitting people this afternoon.
1. Labs and problem sets:
    + First lab with Beth Brown tomorrow using same Zoom link.
    + All labs and problem sets are going to be posted on Moodle (not this webpage)
    + All problem sets will be due on Gradescope at ~~5pm~~ 9pm so that you can visit Spinelli drop-in tutoring hours one last time.
    + First problem set (Intro survey, syllabus quiz, practice tagging individual questions on Gradescope) is due tomorrow, Thu 1/27 at 9pm. 
1. The Smith College CS Department Liaisons will be holding a [Software Install Fair](static/events/software_install_fair.pdf){target="_blank"} on Fri Jan 28 2pm-4:30pm.
1. [Lecture recording](https://smith.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=386c9119-ddcb-49ce-8d3e-ae2901204192){target="_blank"}
1. [Lecture notes](static/2022-01-26-Lec02.pdf){target="_blank"}


## Today's Topics/Activities

### 1. Chalk talk

1. R vs RStudio
1. RStudio server [rstudio.smith.edu](https://rstudio.smith.edu/){target="_blank"} vs RStudio Desktop (see note about Software Install Fair this Friday above)
1. R packages


### 2. In-class exercise

1. Go over ModernDive reading in schedule above, which you need to complete before next lecture.
1. You do not need to submit the answers of all Learning Checks; they are meant for your practice. The solutions to all Learning Checks can be found in Appendix D of ModernDive


***


# Lec 01: Mon 1/24

1. Go over TODO list posted on Moodle
1. [Lecture recording](https://smith.hosted.panopto.com/Panopto/Pages/Viewer.aspx?id=0a3d65d3-f590-447e-be00-ae270119b888){target="_blank"} (started a little late, apologies)
